# CARTS Makefile for KASTORS SparseLU

CFLAGS = -fopenmp -O0 -DMSIZE=1 -DSMSIZE=1
INCLUDES = -I../include -I.. -I../common

SRCS = $(wildcard *.c)

all: $(SRCS:.c=_arts.mlir)

%.mlir: %.c
	carts cgeist $< $(CFLAGS) $(INCLUDES) -S > $@

%_arts.mlir: %.mlir
	carts run $< --openmp-to-arts --debug-only=convert_openmp_to_arts > $@

clean:
	rm -f *.mlir

.PHONY: all clean
