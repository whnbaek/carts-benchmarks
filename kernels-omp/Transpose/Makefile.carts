# CARTS Makefile for Transpose example

CFLAGS = -fopenmp -O0
INCLUDES = -I..

SRC = transpose.c

all: mlir arts

mlir: transpose.mlir

arts: transpose_arts.mlir

transpose.mlir: $(SRC)
	carts cgeist $(SRC) $(CFLAGS) $(INCLUDES) -S > transpose.mlir

transpose_arts.mlir: transpose.mlir
	carts run transpose.mlir --convert-openmp --debug-only=convert_openmp_to_arts > transpose_arts.mlir

clean:
	rm -f *.mlir *.o

.PHONY: all mlir arts clean

