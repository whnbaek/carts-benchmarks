# CARTS Makefile for PIC example

CFLAGS = -fopenmp -O0
INCLUDES = -I.. -I../common

SRC = pic.c ../common/random_draw.c

all: mlir arts

mlir: pic.mlir

arts: pic_arts.mlir

pic.mlir: $(SRC)
	carts cgeist $(SRC) $(CFLAGS) $(INCLUDES) -S > pic.mlir

pic_arts.mlir: pic.mlir
	carts run pic.mlir --convert-openmp --debug-only=convert_openmp_to_arts > pic_arts.mlir

clean:
	rm -f *.mlir *.o

.PHONY: all mlir arts clean

