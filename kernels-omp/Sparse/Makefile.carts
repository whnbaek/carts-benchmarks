# CARTS Makefile for Sparse example

CFLAGS = -fopenmp -O0
INCLUDES = -I..

SRC = sparse.c

all: mlir arts

mlir: sparse.mlir

arts: sparse_arts.mlir

sparse.mlir: $(SRC)
	carts cgeist $(SRC) $(CFLAGS) $(INCLUDES) -S > sparse.mlir

sparse_arts.mlir: sparse.mlir
	carts run sparse.mlir --convert-openmp --debug-only=convert_openmp_to_arts > sparse_arts.mlir

clean:
	rm -f *.mlir *.o

.PHONY: all mlir arts clean
