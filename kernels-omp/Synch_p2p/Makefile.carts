# CARTS Makefile for Synch_p2p example

CFLAGS = -fopenmp -O0
INCLUDES = -I..

SRC = p2p.c

all: mlir arts

mlir: p2p.mlir

arts: p2p_arts.mlir

p2p.mlir: $(SRC)
	carts cgeist $(SRC) $(CFLAGS) $(INCLUDES) -S > p2p.mlir

p2p_arts.mlir: p2p.mlir
	carts run p2p.mlir --convert-openmp --debug-only=convert_openmp_to_arts > p2p_arts.mlir

clean:
	rm -f *.mlir *.o

.PHONY: all mlir arts clean
