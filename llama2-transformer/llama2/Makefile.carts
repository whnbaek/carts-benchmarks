# CARTS Makefile for Llama2 Transformer

CFLAGS = -fopenmp -O0
INCLUDES = -I.

SRCS = llama2.c

all: $(SRCS:.c=_arts.mlir)

%.mlir: %.c
	carts cgeist $< $(CFLAGS) $(INCLUDES) -S > $@

%_arts.mlir: %.mlir
	carts run $< --openmp-to-arts --debug-only=convert_openmp_to_arts > $@

clean:
	rm -f *.mlir

.PHONY: all clean
